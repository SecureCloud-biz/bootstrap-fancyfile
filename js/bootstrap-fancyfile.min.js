/*
 * The MIT License
 *
 * Copyright 2013 Aelxey Gordeyev <aleksej@gorrdejev.lv>.
 *
 */

!function(e){"use strict";var t="[data-toggle=fancyfile]",n=function(t,n){var r=e(t);this.options=e.extend({},e.fn.fancyfile.defaults,n);this.makeFancy(r)};n.prototype={constructor:n,makeFancy:function(t){var r=e(this.options.container);var i=t.clone(true);var s=i.attr("class");var o=e(this.options.fakeButton);var u=e(this.options.fakeInput);var a=false;if(s){s.split(" ").forEach(function(e){if(/input|span/i.test(e)){r.find("div").addClass(e)}if(/primary|info|success|warning|danger|inverse/.test(e)){a=true;o.addClass(e)}})}var f=t.attr("data-text");if(f){this.options.text=f==="false"?"":f}var l=t.attr("data-icon");if(l){this.options.icon=l==="false"?"":'<i class="'+l+'"></i>'}var c=t.attr("data-style");if(c){a=c==="false"?false:true;this.options.style=c==="false"?"":c}var h=this.options.icon?this.options.icon+" ":"";o.html(h+this.options.text);if(a||/primary|info|success|warning|danger|inverse/.test(this.options.style)){o.find("i").addClass("icon-white")}if(this.options.style!==""){o.addClass(this.options.style)}var p=t.attr("data-placeholder");if(p){this.options.placeholder=p==="false"?"":p}u.attr("placeholder",this.options.placeholder);r.insertBefore(t);i.attr("type","file");r.append(i);r.find("div").append(u).append(o);var d=r.find("div").width();i.width(d);t.remove();u.width(d-o.width()-41).height(20);o.height(20);i.hover(function(t){e(this).parent().find(".fake-input").addClass("active");e(this).parent().find(".btn").addClass("active")},function(t){e(this).parent().find(".fake-input").removeClass("active");e(this).parent().find(".btn").removeClass("active")});i.on("change.fancyfile.data-api",n.prototype.change)},change:function(t){var n=this.files[0],r=n.name;e(this).parent().find(".fake-input").val(r)}};var r=e.fn.fancyfile;e.fn.fancyfile=function(t){return this.each(function(){var r=e(this),i=r.data("fancyfile");if(!i)r.data("fancyfile",i=new n(this,t));if(typeof t=="string")i[t].call(r)})};e.fn.fancyfile.defaults={container:'<div class="fancy-file"><div class="fake-file"></div></div>',fakeInput:'<input class="fake-input" type="text" />',fakeButton:'<button class="btn"></button>',text:"Select File",icon:'<i class="icon-file"></i>',style:"",placeholder:"Select Fileâ€¦"};e.fn.fancyfile.Constructor=n;e.fn.fancyfile.noConflict=function(){e.fn.fancyfile=r;return this};e(window).on("load",function(){e(t).each(function(){e(this).fancyfile()})})}(window.jQuery)